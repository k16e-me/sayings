---
import Fab from './Fab.astro'
import { Icon } from 'astro-icon'
---
<div
    class="fixed bottom-72 lg:bottom-32 right-3 sm:right-5 lg:right-7 transition duration-300 ease-in-out opacity-0 translate-y-20 z-30"
    data-backtotop>
    <Fab>
        <Icon name='arrow-up' class='w-7'/>
        <span class='sr-only'>Back to top</span>
    </Fab>
</div>

<script>
    const
        backToTop = document.querySelector('[data-backtotop]'),
        button = backToTop.querySelector('button'),
        enter = ['opacity-100', 'translate-y-0'],
        leave = ['opacity-0', 'translate-y-20']

    window.addEventListener('scroll', () => {
        if (window.scrollY > 640) {
            backToTop.classList.add(...enter)
            backToTop.classList.remove(...leave)
        }
        else removeBackToTop()
    })

    button.addEventListener('click', () => window.scrollTo({ top: 0, left: 0, behavior: 'smooth'}), false)

    function removeBackToTop() {
        backToTop.classList.remove(...enter)
        backToTop.classList.add(...leave)
    }
</script>