<div
    class="fixed flex justify-center w-full bottom-12 md:bottom-9 transition duration-300 ease-in-out opacity-0 translate-y-20"
    data-toast>
    <aside
        class="h-12 w-40 bg-slate-800 dark:bg-neutral-800 text-white dark:text-white/70 flex items-center justify-center text-center rounded-full shadow">
        <h2 class="sr-only">Toast</h2>
        <span class="text-base font-medium">
            Link copied 🎉
        </span>
    </aside>
</div>

<script>
    import { $, $$, slideIn, slideOut, enter, leave } from '../js/snips'

    document.addEventListener('astro:page-load', () => {
        Toast()
    })

    function Toast() {
        const
            linkCopy = $$('[data-copy]'),
            toast = $('[data-toast]')

        linkCopy.forEach(link => {
            link.addEventListener('click', e => {
                e.preventDefault()

                navigator.clipboard.writeText(e.target.href)

                if (toast.classList.contains('opacity-100')) return

                slideIn(toast, leave(), enter())

                setTimeout(() => {
                    slideOut(toast, enter(), leave())
                }, 3000)
            })
        })
    }
</script>