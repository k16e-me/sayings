---
import { SEO } from 'astro-seo'
import { pwaInfo } from 'virtual:pwa-info'

const { title, image, description = '' } = Astro.props
---
<head>
	<meta charset='UTF-8' />
	<meta name='viewport' content='width=device-width'/>
	<link rel='icon' type='image/svg+xml' href='/favicon.svg'/>
    <meta name="generator" content={ Astro.generator }/>
    <meta name="view-transition" content="same-origin" />
	<SEO
        title={ title }
        titleDefault="These are the Sayings of Kabolobari"
        description={ description }
        openGraph={{
            basic: {
                title: title ,
                type: 'website',
                image: image,
            }
        }}
        canonical={ Astro.url.href }
    />
    { pwaInfo && <Fragment set:html={pwaInfo.webManifest.linkTag} /> }
    <script src="/src/pwa.ts"></script>
</head>
<script is:inline>
    setTheme()

    function setTheme() {
        let
            theme = localStorage.getItem('theme'),
            html = document.documentElement

        theme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'
        localStorage.setItem('theme', theme)

        if (html.classList.contains(theme)) return
        html.classList.add(theme)
    }
</script>