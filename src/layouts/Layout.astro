---
import '@fontsource/limelight'
import '@fontsource-variable/dm-sans'
import Head from '../components/Head.astro'
import Logo from '../components/Logo.astro'
import BackToTop from '../components/BackToTop.astro'
import { useStoryblokApi } from '@storyblok/astro'

const { pageTitle } = Astro.props
const storyblokApi = useStoryblokApi()
const { data: settings } = await storyblokApi.get('cdn/stories/settings', {
    version: import.meta.env.DEV ? 'draft' : 'published'
})
const site = settings.story.content
const year = new Date().getFullYear()
---

<!doctype html>
<html lang="en" class="scroll-smooth">
	<Head title={ site.title }/>
	<body class="text-slate-700 bg-white flex min-h-screen flex-col">
        <h1 class='sr-only'>{ pageTitle }</h1>
        <header class="flex items-center justify-center p-7 sm:p-9">
            <a href="/" class="inline-block">
                <Logo classes="h-16 lg:h-20 fill-slate-950"/>
            </a>
        </header>
		<main
            class="flex-1 py-5">
            <slot/>
            <BackToTop/>
        </main>
        <footer class="flex items-center justify-center text-center p-5 text-slate-500 text-base">
            <div class="max-w-2xl">
                { year } { site.preferredName }. <br class="sm:hidden"/> All rights waived.
            </div>
        </footer>
	</body>
</html>

<style is:global>
    [astro-icon] { @apply flex-shrink-0 pointer-events-none; }
</style>